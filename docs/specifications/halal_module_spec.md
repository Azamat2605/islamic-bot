# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ú–æ–¥—É–ª—å "Halal Places" (–•–∞–ª—è–ª—å –º–µ—Å—Ç–∞)

## –û–±–∑–æ—Ä
–ú–æ–¥—É–ª—å "Halal Places" –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ö–∞–ª—è–ª—å –º–µ—Å—Ç–∞ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏: –º–µ—á–µ—Ç–∏, —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã, –º–∞–≥–∞–∑–∏–Ω—ã, –º–∞–≥–∞–∑–∏–Ω—ã –æ–¥–µ–∂–¥—ã. –ú–æ–¥—É–ª—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π ‚Üí –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –º–µ—Å—Ç (–ø–æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏) ‚Üí –ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º ‚Üí –¥–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –º–µ—Å—Ç–∞.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### User Flow:

1. **–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω**:
   - –ó–∞–≥–æ–ª–æ–≤–æ–∫: "ü•© –•–∞–ª—è–ª—å –º–µ—Å—Ç–∞"
   - –û–ø–∏—Å–∞–Ω–∏–µ: "Find verified places nearby..."
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: "üïå Mosques: [count] üç¥ Restaurants: [count] üõí Shops: [count]"
   - –ö–Ω–æ–ø–∫–∏: [üìç Nearest Places], [üîç Search / Categories], [Back]

2. **–°—Ü–µ–Ω–∞—Ä–∏–π "üìç Nearest Places"**:
   - –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é (ReplyButton)
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é
   - –õ–æ–≥–∏–∫–∞: –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ –º–µ—Å—Ç –≤ –ë–î, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é (–≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ)
   - –í—ã–≤–æ–¥: —Å–ø–∏—Å–æ–∫ 3-5 –±–ª–∏–∂–∞–π—à–∏—Ö –º–µ—Å—Ç —Å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, "~0.8 –∫–º"), —Å—Ç–∞—Ç—É—Å–æ–º (–û—Ç–∫—Ä—ã—Ç–æ/–ó–∞–∫—Ä—ã—Ç–æ) –∏ –∫–Ω–æ–ø–∫–æ–π [Details]
   - –ö–Ω–æ–ø–∫–∞ –≤–Ω–∏–∑—É: [üó∫ Show all on map] (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è MVP, –º–æ–∂–Ω–æ –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–æ–∫)

3. **–°—Ü–µ–Ω–∞—Ä–∏–π "üîç Search / Categories"**:
   - –ö–Ω–æ–ø–∫–∏: [üïå Mosques], [üç¥ Restaurants], [üõí Shops], [üëï Clothes]
   - –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫, –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

4. **–ö–∞—Ä—Ç–æ—á–∫–∞ –º–µ—Å—Ç–∞ (–¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä)**:
   - –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: –ù–∞–∑–≤–∞–Ω–∏–µ, –ê–¥—Ä–µ—Å, –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã, –û–ø–∏—Å–∞–Ω–∏–µ, –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–Ω–∞ –≥–µ–æ–ø–æ–∑–∏—Ü–∏—è)
   - –ö–Ω–æ–ø–∫–∏: [üó∫ Show on map] (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç Venue/Location), [‚≠êÔ∏è Add to Favorites]

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- Python 3.11
- Aiogram 3.x
- SQLAlchemy 2.x + PostgreSQL
- –ê–ª–≥–æ—Ä–∏—Ç–º –≥–∞–≤–µ—Ä—Å–∏–Ω—É—Å–∞ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π
- Inline –∏ Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

## 1. Data Model Schema

### 1.1 –ú–æ–¥–µ–ª—å HalalPlace (–¥–æ–±–∞–≤–∏—Ç—å –≤ database/models.py)

```python
import enum
from sqlalchemy import Enum, String, Float, Boolean, Text, Integer, DateTime, func
from sqlalchemy.orm import Mapped, mapped_column, relationship
from .base import Base

class PlaceType(enum.Enum):
    MOSQUE = "mosque"          # –ú–µ—á–µ—Ç—å
    RESTAURANT = "restaurant"  # –†–µ—Å—Ç–æ—Ä–∞–Ω
    SHOP = "shop"              # –ú–∞–≥–∞–∑–∏–Ω (–ø—Ä–æ–¥—É–∫—Ç—ã)
    CLOTHES = "clothes"        # –ú–∞–≥–∞–∑–∏–Ω –æ–¥–µ–∂–¥—ã
    OTHER = "other"            # –î—Ä—É–≥–æ–µ

class HalalPlace(Base):
    __tablename__ = "halal_places"
    
    id: Mapped[int] = mapped_column(Integer, primary_key=True, autoincrement=True)
    place_type: Mapped[PlaceType] = mapped_column(Enum(PlaceType, native_enum=False), nullable=False)
    title: Mapped[str] = mapped_column(String(200), nullable=False)
    description: Mapped[str] = mapped_column(Text, nullable=True)
    address: Mapped[str] = mapped_column(String(500), nullable=False)
    latitude: Mapped[float] = mapped_column(Float, nullable=False)
    longitude: Mapped[float] = mapped_column(Float, nullable=False)
    working_hours: Mapped[str | None] = mapped_column(String(100), nullable=True)
    phone: Mapped[str | None] = mapped_column(String(20), nullable=True)
    photo_id: Mapped[str | None] = mapped_column(String(500), nullable=True)
    is_verified: Mapped[bool] = mapped_column(Boolean, default=False)
    created_at: Mapped[DateTime] = mapped_column(DateTime, default=func.now())
    updated_at: Mapped[DateTime] = mapped_column(DateTime, default=func.now(), onupdate=func.now())
    
    # Relationships
    favorites: Mapped[list["HalalFavorite"]] = relationship(
        "HalalFavorite", back_populates="place", cascade="all, delete-orphan"
    )
```

### 1.2 –ú–æ–¥–µ–ª—å –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ)

```python
class HalalFavorite(Base):
    __tablename__ = "halal_favorites"
    
    id: Mapped[int] = mapped_column(Integer, primary_key=True, autoincrement=True)
    user_id: Mapped[int] = mapped_column(Integer, ForeignKey("users.id"), nullable=False)
    place_id: Mapped[int] = mapped_column(Integer, ForeignKey("halal_places.id"), nullable=False)
    created_at: Mapped[DateTime] = mapped_column(DateTime, default=func.now())
    
    # Relationships
    user: Mapped["User"] = relationship("User")
    place: Mapped["HalalPlace"] = relationship("HalalPlace", back_populates="favorites")
    
    __table_args__ = (UniqueConstraint('user_id', 'place_id', name='uq_user_place_favorite'),)
```

### 1.3 –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è (—Ñ–æ—Ä–º—É–ª–∞ –≥–∞–≤–µ—Ä—Å–∏–Ω—É—Å–∞)

```python
from math import radians, sin, cos, sqrt, atan2

def haversine_distance(lat1: float, lon1: float, lat2: float, lon2: float) -> float:
    """
    –í—ã—á–∏—Å–ª—è–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏ –Ω–∞ –ó–µ–º–ª–µ (–≤ –∫–º)
    –∏—Å–ø–æ–ª—å–∑—É—è —Ñ–æ—Ä–º—É–ª—É –≥–∞–≤–µ—Ä—Å–∏–Ω—É—Å–∞.
    """
    R = 6371.0  # –†–∞–¥–∏—É—Å –ó–µ–º–ª–∏ –≤ –∫–∏–ª–æ–º–µ—Ç—Ä–∞—Ö
    
    lat1_rad = radians(lat1)
    lon1_rad = radians(lon1)
    lat2_rad = radians(lat2)
    lon2_rad = radians(lon2)
    
    dlon = lon2_rad - lon1_rad
    dlat = lat2_rad - lat1_rad
    
    a = sin(dlat / 2)**2 + cos(lat1_rad) * cos(lat2_rad) * sin(dlon / 2)**2
    c = 2 * atan2(sqrt(a), sqrt(1 - a))
    
    distance = R * c
    return round(distance, 2)  # –û–∫—Ä—É–≥–ª—è–µ–º –¥–æ 2 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
```

## 2. Callback Data Structure

### 2.1 CallbackData –∫–ª–∞—Å—Å—ã (bot/callbacks/halal.py)

```python
from aiogram.filters.callback_data import CallbackData
from enum import Enum
from typing import Optional

class HalalAction(str, Enum):
    MAIN = "main"               # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    NEAREST = "nearest"         # –ë–ª–∏–∂–∞–π—à–∏–µ –º–µ—Å—Ç–∞
    CATEGORY = "category"       # –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    PLACE_LIST = "place_list"   # –°–ø–∏—Å–æ–∫ –º–µ—Å—Ç
    PLACE_DETAILS = "place_details"  # –î–µ—Ç–∞–ª–∏ –º–µ—Å—Ç–∞
    FAVORITE = "favorite"       # –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
    MAP = "map"                 # –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ
    BACK = "back"               # –ù–∞–∑–∞–¥

class HalalCallback(CallbackData, prefix="halal"):
    action: HalalAction
    category: Optional[str] = None
    place_id: Optional[int] = None
    page: Optional[int] = 0
    latitude: Optional[float] = None
    longitude: Optional[float] = None
```

### 2.2 –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ø—Ä–æ—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è MVP

```
halal:main                     # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
halal:nearest                  # –ë–ª–∏–∂–∞–π—à–∏–µ –º–µ—Å—Ç–∞ (–∑–∞–ø—Ä–æ—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏)
halal:category:{category}      # –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
halal:place_list:{category}:{page}   # –°–ø–∏—Å–æ–∫ –º–µ—Å—Ç —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
halal:place_details:{place_id} # –î–µ—Ç–∞–ª–∏ –º–µ—Å—Ç–∞
halal:favorite:{place_id}      # –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (toggle)
halal:map:{place_id}           # –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ
halal:back:{from_state}        # –ù–∞–∑–∞–¥
```

## 3. Interface States (–¢–æ—á–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã/–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞)

### 3.1 Screen 1: –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é Halal Places

**–¢–µ–∫—Å—Ç**:
```
ü•© –•–ê–õ–Ø–õ–¨ –ú–ï–°–¢–ê

–ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏:
‚Ä¢ –ú–µ—á–µ—Ç–∏ –¥–ª—è –º–æ–ª–∏—Ç–≤—ã
‚Ä¢ –†–µ—Å—Ç–æ—Ä–∞–Ω—ã —Å —Ö–∞–ª—è–ª—å –µ–¥–æ–π
‚Ä¢ –ú–∞–≥–∞–∑–∏–Ω—ã —Å —Ö–∞–ª—è–ª—å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
‚Ä¢ –ú–∞–≥–∞–∑–∏–Ω—ã –æ–¥–µ–∂–¥—ã

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
üïå –ú–µ—á–µ—Ç–∏: {mosques_count}
üç¥ –†–µ—Å—Ç–æ—Ä–∞–Ω—ã: {restaurants_count} 
üõí –ú–∞–≥–∞–∑–∏–Ω—ã: {shops_count}

–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:
```

**–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (Inline)**:
```
[üìç –ë–ª–∏–∂–∞–π—à–∏–µ –º–µ—Å—Ç–∞] [üîç –ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º]
[üîô –ù–∞–∑–∞–¥]
```

### 3.2 Screen 2: –ó–∞–ø—Ä–æ—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ (Nearest Places)

**–¢–µ–∫—Å—Ç**:
```
üìç –ë–õ–ò–ñ–ê–ô–®–ò–ï –ú–ï–°–¢–ê

–î–ª—è –ø–æ–∏—Å–∫–∞ –º–µ—Å—Ç –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–µ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π.

–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:
```

**–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (Reply)**:
```
[üìç –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ]
[üîô –ù–∞–∑–∞–¥]
```

### 3.3 Screen 3: –°–ø–∏—Å–æ–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –º–µ—Å—Ç

**–¢–µ–∫—Å—Ç** (–ø—Ä–∏–º–µ—Ä):
```
üìç –ë–õ–ò–ñ–ê–ô–®–ò–ï –ú–ï–°–¢–ê (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é)

1. üïå –ú–µ—á–µ—Ç—å "–•–∞–∑—Ä–∞—Ç –°—É–ª—Ç–∞–Ω"
   üìç ~0.8 –∫–º
   üïí –û—Ç–∫—Ä—ã—Ç–æ –¥–æ 20:00
   ‚≠ê 4.8 (124 –æ—Ç–∑—ã–≤–∞)

2. üç¥ –†–µ—Å—Ç–æ—Ä–∞–Ω "Al-Noor"
   üìç ~1.2 –∫–º  
   üïí –û—Ç–∫—Ä—ã—Ç–æ –¥–æ 23:00
   ‚≠ê 4.5 (89 –æ—Ç–∑—ã–≤–æ–≤)

3. üõí –ú–∞–≥–∞–∑–∏–Ω "Halal Market"
   üìç ~1.5 –∫–º
   üïí –û—Ç–∫—Ä—ã—Ç–æ –¥–æ 22:00
   ‚≠ê 4.7 (203 –æ—Ç–∑—ã–≤–∞)

–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:
```

**–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (Inline)**:
```
[1. –ú–µ—á–µ—Ç—å "–•–∞–∑—Ä–∞—Ç –°—É–ª—Ç–∞–Ω" ‚Üí]
[2. –†–µ—Å—Ç–æ—Ä–∞–Ω "Al-Noor" ‚Üí]
[3. –ú–∞–≥–∞–∑–∏–Ω "Halal Market" ‚Üí]
[üó∫ –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –Ω–∞ –∫–∞—Ä—Ç–µ]
[üîô –ù–∞–∑–∞–¥]
```

### 3.4 Screen 4: –ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

**–¢–µ–∫—Å—Ç**:
```
üîç –ü–û–ò–°–ö –ü–û –ö–ê–¢–ï–ì–û–†–ò–Ø–ú

–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –ø–æ–∏—Å–∫–∞:

‚Ä¢ üïå –ú–µ—á–µ—Ç–∏ - –º–µ—Å—Ç–∞ –¥–ª—è –º–æ–ª–∏—Ç–≤—ã
‚Ä¢ üç¥ –†–µ—Å—Ç–æ—Ä–∞–Ω—ã - —Ö–∞–ª—è–ª—å –∫—É—Ö–Ω—è
‚Ä¢ üõí –ú–∞–≥–∞–∑–∏–Ω—ã - –ø—Ä–æ–¥—É–∫—Ç—ã
‚Ä¢ üëï –ú–∞–≥–∞–∑–∏–Ω—ã –æ–¥–µ–∂–¥—ã - –º—É—Å—É–ª—å–º–∞–Ω—Å–∫–∞—è –æ–¥–µ–∂–¥–∞
```

**–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (Inline)**:
```
[üïå –ú–µ—á–µ—Ç–∏] [üç¥ –†–µ—Å—Ç–æ—Ä–∞–Ω—ã]
[üõí –ú–∞–≥–∞–∑–∏–Ω—ã] [üëï –û–¥–µ–∂–¥–∞]
[üîô –ù–∞–∑–∞–¥]
```

### 3.5 Screen 5: –°–ø–∏—Å–æ–∫ –º–µ—Å—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–¢–µ–∫—Å—Ç** (–ø—Ä–∏–º–µ—Ä –¥–ª—è –º–µ—á–µ—Ç–µ–π):
```
üïå –ú–ï–ß–ï–¢–ò

–°–ø–∏—Å–æ–∫ –º–µ—á–µ—Ç–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

1. –ú–µ—á–µ—Ç—å "–•–∞–∑—Ä–∞—Ç –°—É–ª—Ç–∞–Ω"
   üìç —É–ª. –ù–∞–≤–æ–∏, 45
   üïí 05:00-20:00

2. –ú–µ—á–µ—Ç—å "–ê–ª—å-–ë—É—Ö–∞—Ä–∏"
   üìç –ø—Ä. –ê–º–∏—Ä–∞ –¢–µ–º—É—Ä–∞, 12
   üïí 05:00-21:00

3. –ú–µ—á–µ—Ç—å "–ù—É—Ä-–ò—Å–ª–∞–º"
   üìç —É–ª. –®–∞—Ö—Ä–∏—Å–∞–±–∑, 78
   üïí 05:00-19:00

–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—á–µ—Ç—å –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:
```

**–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (Inline)**:
```
[1. –ú–µ—á–µ—Ç—å "–•–∞–∑—Ä–∞—Ç –°—É–ª—Ç–∞–Ω" ‚Üí]
[2. –ú–µ—á–µ—Ç—å "–ê–ª—å-–ë—É—Ö–∞—Ä–∏" ‚Üí]
[3. –ú–µ—á–µ—Ç—å "–ù—É—Ä-–ò—Å–ª–∞–º" ‚Üí]
[üîô –ù–∞–∑–∞–¥]
```

### 3.6 Screen 6: –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –º–µ—Å—Ç–∞

**–¢–µ–∫—Å—Ç** (–ø—Ä–∏–º–µ—Ä):
```
üïå –ú–ï–ß–ï–¢–¨ "–•–ê–ó–†–ê–¢ –°–£–õ–¢–ê–ù"

üìç –ê–¥—Ä–µ—Å: —É–ª. –ù–∞–≤–æ–∏, 45, –¢–∞—à–∫–µ–Ω—Ç
üïí –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 05:00 - 20:00 (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
üìû –¢–µ–ª–µ—Ñ–æ–Ω: +998 71 123 45 67
‚≠ê –†–µ–π—Ç–∏–Ω–≥: 4.8 (124 –æ—Ç–∑—ã–≤–∞)

–û–ø–∏—Å–∞–Ω–∏–µ:
–û–¥–Ω–∞ –∏–∑ –∫—Ä—É–ø–Ω–µ–π—à–∏—Ö –º–µ—á–µ—Ç–µ–π –≥–æ—Ä–æ–¥–∞, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –≤ 2007 –≥–æ–¥—É. 
–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: 5000 —á–µ–ª–æ–≤–µ–∫. –ï—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ª—ã –¥–ª—è –∂–µ–Ω—â–∏–Ω.

üìç –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –≤–∞—Å: ~0.8 –∫–º
```

**–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (Inline)**:
```
[üó∫ –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ] [‚≠êÔ∏è –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ]
[üîô –ù–∞–∑–∞–¥]
```

### 3.7 Screen 7: –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ

**–¢–µ–∫—Å—Ç**:
```
üó∫ –ú–ï–ß–ï–¢–¨ "–•–ê–ó–†–ê–¢ –°–£–õ–¢–ê–ù"

–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.
–í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ –≤ –∫–∞—Ä—Ç–∞—Ö.
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `Venue` –∏–ª–∏ `Location` —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –º–µ—Å—Ç–∞.

## 4. Service Layer (bot/services/halal_service.py)

### 4.1 –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞

```python
from typing import List, Optional, Dict, Tuple
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy import select, func
import math

class HalalService:
    """–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ö–∞–ª—è–ª—å –º–µ—Å—Ç–∞–º–∏."""
    
    @staticmethod
    async def get_nearby_places(
        latitude: float,
        longitude: float,
        session: AsyncSession,
        limit: int = 5,
        radius_km: float = 10.0
    ) -> List[Dict]:
        """
        –ü–æ–ª—É—á–∏—Ç—å –±–ª–∏–∂–∞–π—à–∏–µ –º–µ—Å—Ç–∞ –≤ —Ä–∞–¥–∏—É—Å–µ radius_km.
        """
        # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –º–µ—Å—Ç–∞ –∏–∑ –ë–î
        stmt = select(HalalPlace)
        result = await session.execute(stmt)
        places = result.scalars().all()
        
        # –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ–º
        nearby_places = []
        for place in places:
            distance = haversine_distance(latitude, longitude, place.latitude, place.longitude)
            if distance <= radius_km:
                place_dict = {
                    "id": place.id,
                    "title": place.title,
                    "place_type": place.place_type.value,
                    "address": place.address,
                    "distance": distance,
                    "working_hours": place.working_hours,
                    "phone": place.phone,
                    "is_verified": place.is_verified
                }
                nearby_places.append(place_dict)
        
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é
        nearby_places.sort(key=lambda x: x["distance"])
        
        return nearby_places[:limit]
    
    @staticmethod
    async def get_places_by_category(
        category: str,
        session: AsyncSession,
        limit: int = 10
    ) -> List[Dict]:
        """
        –ü–æ–ª—É—á–∏—Ç—å –º–µ—Å—Ç–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
        """
        stmt = select(HalalPlace).where(
            HalalPlace.place_type == category
        ).order_by(HalalPlace.title).limit(limit)
        
        result = await session.execute(stmt)
        places = result.scalars().all()
        
        return [
            {
                "id": place.id,
                "title": place.title,
                "address": place.address,
                "working_hours": place.working_hours,
                "phone": place.phone,
                "is_verified": place.is_verified
            }
            for place in places
        ]
    
    @staticmethod
    async def get_place_details(
        place_id: int,
        session: AsyncSession
    ) -> Optional[Dict]:
        """
        –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–µ—Å—Ç–µ.
        """
        stmt = select(HalalPlace).where(HalalPlace.id == place_id)
        result = await session.execute(stmt)
        place = result.scalar_one_or_none()
        
        if not place:
            return None
        
        return {
            "id": place.id,
            "title": place.title,
            "place_type": place.place_type.value,
            "description": place.description,
            "address": place.address,
            "latitude": place.latitude,
            "longitude": place.longitude,
            "working_hours": place.working_hours,
            "phone": place.phone,
            "photo_id": place.photo_id,
            "is_verified": place.is_verified,
            "created_at": place.created_at
        }
    
    @staticmethod
    async def get_counts_by_category(
        session: AsyncSession
    ) -> Dict[str, int]:
        """
        –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞.
        """
        from database.models import PlaceType
        
        counts = {}
        for place_type in PlaceType:
            stmt = select(func.count(HalalPlace.id)).where(
                HalalPlace.place_type == place_type
            )
            result = await session.execute(stmt)
            count = result.scalar() or 0
            counts[place_type.value] = count
        
        return counts
    
    @staticmethod
    async def search_places(
        query: str,
        category: Optional[str] = None,
        session: AsyncSession,
        limit: int = 10
    ) -> List[Dict]:
        """
        –ü–æ–∏—Å–∫ –º–µ—Å—Ç –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∞–¥—Ä–µ—Å—É.
        """
        stmt = select(HalalPlace).where(
            HalalPlace.title.ilike(f"%{query}%") |
            HalalPlace.address.ilike(f"%{query}%")
        )
        
        if category:
            stmt = stmt.where(HalalPlace.place_type == category)
        
        stmt = stmt.order_by(HalalPlace.title).limit(limit)
        
        result = await session.execute(stmt)
        places = result.scalars().all()
        
        return [
            {
                "id": place.id,
                "title": place.title,
                "address": place.address,
                "place_type": place.place_type.value,
                "working_hours": place.working_hours
            }
            for place in places
        ]
```

## 5. States (FSM) –≤ bot/states/halal.py

```python
from aiogram.fsm.state import State, StatesGroup

class HalalStates(StatesGroup):
    """
    –°–æ—Å—Ç–æ—è–Ω–∏—è FSM –¥–ª—è –º–æ–¥—É–ª—è Halal Places.
    """
    waiting_for_location = State()      # –û–∂–∏–¥–∞–Ω–∏–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
    waiting_for_search_query = State()  # –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
    viewing_place_details = State()     # –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –º–µ—Å—Ç–∞
```

## 6. Keyboards Structure (bot/keyboards/inline/halal.py)

### 6.1 –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

```python
from aiogram.utils.keyboard import InlineKeyboardBuilder
from typing import List, Dict, Optional

def get_halal_main_keyboard(counts: Dict[str, int]) -> InlineKeyboardMarkup:
    """
    –ì–ª–∞–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ Halal Places.
    """
    builder = InlineKeyboardBuilder()
    
    builder.button(
        text=f"üìç –ë–ª–∏–∂–∞–π—à–∏–µ –º–µ—Å—Ç–∞",
        callback_data=HalalCallback(action="nearest")
    )
    builder.button(
        text=f"üîç –ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º",
        callback_data=HalalCallback(action="category")
    )
    
    builder.button(
        text="üîô –ù–∞–∑–∞–¥",
        callback_data=HalalCallback(action="back", from_state="main")
    )
    
    builder.adjust(1)  # –ü–æ –æ–¥–Ω–æ–º—É –≤ —Ä—è–¥
    return builder.as_markup()

def get_categories_keyboard() -> InlineKeyboardMarkup:
    """
    –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
    """
    builder = InlineKeyboardBuilder()
    
    categories = [
        ("üïå –ú–µ—á–µ—Ç–∏", "mosque"),
        ("üç¥ –†–µ—Å—Ç–æ—Ä–∞–Ω—ã", "restaurant"),
        ("üõí –ú–∞–≥–∞–∑–∏–Ω—ã", "shop"),
        ("üëï –ú–∞–≥–∞–∑–∏–Ω—ã –æ–¥–µ–∂–¥—ã", "clothes"),
    ]
    
    for text, category in categories:
        builder.button(
            text=text,
            callback_data=HalalCallback(action="category", category=category)
        )
    
    builder.button(
        text="üîô –ù–∞–∑–∞–¥",
        callback_data=HalalCallback(action="back", from_state="categories")
    )
    
    builder.adjust(2)  # –ü–æ 2 –≤ —Ä—è–¥
    return builder.as_markup()

def get_location_request_keyboard() -> ReplyKeyboardMarkup:
    """
    –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ (Reply).
    """
    return ReplyKeyboardMarkup(
        keyboard=[
            [KeyboardButton(text="üìç –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ", request_location=True)],
            [KeyboardButton(text="üîô –ù–∞–∑–∞–¥")]
        ],
        resize_keyboard=True,
        one_time_keyboard=True
    )

def get_places_list_keyboard(places: List[Dict], current_page: int = 0) -> InlineKeyboardMarkup:
    """
    –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–ø–∏—Å–∫–∞ –º–µ—Å—Ç.
    """
    builder = InlineKeyboardBuilder()
    
    for i, place in enumerate(places, 1):
        builder.button(
            text=f"{i}. {place['title']} ‚Üí",
            callback_data=HalalCallback(
                action="place_details",
                place_id=place['id']
            )
        )
    
    # –ö–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑–∞ –Ω–∞ –∫–∞—Ä—Ç–µ (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
    if places and len(places) > 0:
        builder.button(
            text="üó∫ –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –Ω–∞ –∫–∞—Ä—Ç–µ",
            callback_data=HalalCallback(action="map", place_id=0)  # –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π ID –¥–ª—è "–≤—Å–µ—Ö –º–µ—Å—Ç"
        )
    
    builder.button(
        text="üîô –ù–∞–∑–∞–¥",
        callback_data=HalalCallback(action="back", from_state="list")
    )
    
    builder.adjust(1)  # –ü–æ –æ–¥–Ω–æ–º—É –≤ —Ä—è–¥
    return builder.as_markup()

def get_place_details_keyboard(place_id: int, is_favorite: bool = False) -> InlineKeyboardMarkup:
    """
    –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –º–µ—Å—Ç–∞.
    """
    builder = InlineKeyboardBuilder()
    
    builder.button(
        text="üó∫ –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ",
        callback_data=HalalCallback(action="map", place_id=place_id)
    )
    
    favorite_text = "‚ù§Ô∏è –£–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ" if is_favorite else "‚≠êÔ∏è –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"
    builder.button(
        text=favorite_text,
        callback_data=HalalCallback(action="favorite", place_id=place_id)
    )
    
    builder.button(
        text="üîô –ù–∞–∑–∞–¥",
        callback_data=HalalCallback(action="back", from_state="details")
    )
    
    builder.adjust(1)
    return builder.as_markup()
```

## 7. Handlers Structure (bot/handlers/sections/halal_places_handlers.py)

### 7.1 –û—Å–Ω–æ–≤–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

```python
from aiogram import Router, types, F
from aiogram.fsm.context import FSMContext
from aiogram.utils.i18n import gettext as _
from sqlalchemy.ext.asyncio import AsyncSession

from bot.services.halal_service import HalalService
from bot.states.halal import HalalStates
from bot.keyboards.inline.halal import (
    get_halal_main_keyboard,
    get_categories_keyboard,
    get_location_request_keyboard,
    get_places_list_keyboard,
    get_place_details_keyboard
)
from bot.callbacks.halal import HalalCallback, HalalAction

router = Router(name="halal_places")

# –ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞–∑–¥–µ–ª–∞ Halal Places
@router.callback_query(F.data == "halal_places")
async def halal_places_main_handler(
    callback: types.CallbackQuery,
    session: AsyncSession
) -> None:
    """
    –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω Halal Places.
    """
    # –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    counts = await HalalService.get_counts_by_category(session)
    
    # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
    text = _(
        "ü•© –•–ê–õ–Ø–õ–¨ –ú–ï–°–¢–ê\n\n"
        "–ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏:\n"
        "‚Ä¢ –ú–µ—á–µ—Ç–∏ –¥–ª—è –º–æ–ª–∏—Ç–≤—ã\n"
        "‚Ä¢ –†–µ—Å—Ç–æ—Ä–∞–Ω—ã —Å —Ö–∞–ª—è–ª—å –µ–¥–æ–π\n"
        "‚Ä¢ –ú–∞–≥–∞–∑–∏–Ω—ã —Å —Ö–∞–ª—è–ª—å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏\n"
        "‚Ä¢ –ú–∞–≥–∞–∑–∏–Ω—ã –æ–¥–µ–∂–¥—ã\n\n"
        "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n"
        "üïå –ú–µ—á–µ—Ç–∏: {mosques_count}\n"
        "üç¥ –†–µ—Å—Ç–æ—Ä–∞–Ω—ã: {restaurants_count}\n"
        "üõí –ú–∞–≥–∞–∑–∏–Ω—ã: {shops_count}\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:"
    ).format(
        mosques_count=counts.get("mosque", 0),
        restaurants_count=counts.get("restaurant", 0),
        shops_count=counts.get("shop", 0) + counts.get("clothes", 0)
    )
    
    await callback.message.edit_text(
        text,
        reply_markup=get_halal_main_keyboard(counts)
    )
    await callback.answer()

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –º–µ—Å—Ç
@router.callback_query(HalalCallback.filter(F.action == HalalAction.NEAREST))
async def nearest_places_handler(
    callback: types.CallbackQuery,
    state: FSMContext
) -> None:
    """
    –ó–∞–ø—Ä–æ—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–∏—Ö –º–µ—Å—Ç.
    """
    text = _(
        "üìç –ë–õ–ò–ñ–ê–ô–®–ò–ï –ú–ï–°–¢–ê\n\n"
        "–î–ª—è –ø–æ–∏—Å–∫–∞ –º–µ—Å—Ç –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–µ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π.\n\n"
        "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:"
    )
    
    await callback.message.edit_text(text)
    await callback.message.answer(
        _("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:"),
        reply_markup=get_location_request_keyboard()
    )
    
    await state.set_state(HalalStates.waiting_for_location)
    await callback.answer()

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
@router.message(HalalStates.waiting_for_location, F.location)
async def location_received_handler(
    message: types.Message,
    state: FSMContext,
    session: AsyncSession
) -> None:
    """
    –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏.
    """
    location = message.location
    latitude = location.latitude
    longitude = location.longitude
    
    # –ü–æ–ª—É—á–∞–µ–º –±–ª–∏–∂–∞–π—à–∏–µ –º–µ—Å—Ç–∞
    nearby_places = await HalalService.get_nearby_places(
        latitude=latitude,
        longitude=longitude,
        session=session,
        limit=5,
        radius_km=10.0
    )
    
    if not nearby_places:
        text = _(
            "üìç –ë–õ–ò–ñ–ê–ô–®–ò–ï –ú–ï–°–¢–ê\n\n"
            "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤ —Ä–∞–¥–∏—É—Å–µ 10 –∫–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ —Ö–∞–ª—è–ª—å –º–µ—Å—Ç.\n"
            "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∏—Å–∫–∞—Ç—å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º."
        )
        await message.answer(text, reply_markup=get_categories_keyboard())
        await state.clear()
        return
    
    # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–æ —Å–ø–∏—Å–∫–æ–º –º–µ—Å—Ç
    places_text = ""
    for i, place in enumerate(nearby_places, 1):
        place_type_emoji = {
            "mosque": "üïå",
            "restaurant": "üç¥",
            "shop": "üõí",
            "clothes": "üëï",
            "other": "üìç"
        }.get(place["place_type"], "üìç")
        
        places_text += _(
            "{i}. {emoji} {title}\n"
            "   üìç ~{distance} –∫–º\n"
            "   üïí {working_hours}\n\n"
        ).format(
            i=i,
            emoji=place_type_emoji,
            title=place["title"],
            distance=place["distance"],
            working_hours=place["working_hours"] or _("–ù–µ —É–∫–∞–∑–∞–Ω–æ")
        )
    
    text = _("üìç –ë–õ–ò–ñ–ê–ô–®–ò–ï –ú–ï–°–¢–ê (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é)\n\n{places}").format(
        places=places_text
    )
    
    await message.answer(
        text,
        reply_markup=get_places_list_keyboard(nearby_places)
    )
    await state.clear()

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
@router.callback_query(HalalCallback.filter(F.action == HalalAction.CATEGORY))
async def category_selection_handler(
    callback: types.CallbackQuery,
    callback_data: HalalCallback,
    session: AsyncSession
) -> None:
    """
    –ü–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ –º–µ—Å—Ç –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
    """
    category = callback_data.category
    
    # –ú–∞–ø–ø–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞ —Ä—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è
    category_names = {
        "mosque": "üïå –ú–ï–ß–ï–¢–ò",
        "restaurant": "üç¥ –†–ï–°–¢–û–†–ê–ù–´",
        "shop": "üõí –ú–ê–ì–ê–ó–ò–ù–´",
        "clothes": "üëï –ú–ê–ì–ê–ó–ò–ù–´ –û–î–ï–ñ–î–´"
    }
    
    category_name = category_names.get(category, _("–ö–∞—Ç–µ–≥–æ—Ä–∏—è"))
    
    # –ü–æ–ª—É—á–∞–µ–º –º–µ—Å—Ç–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    places = await HalalService.get_places_by_category(
        category=category,
        session=session,
        limit=10
    )
    
    if not places:
        text = _(
            "{category_name}\n\n"
            "–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç –º–µ—Å—Ç.\n"
            "–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –º–µ—Å—Ç!"
        ).format(category_name=category_name)
        
        await callback.message.edit_text(
            text,
            reply_markup=get_categories_keyboard()
        )
        await callback.answer()
        return
    
    # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–æ —Å–ø–∏—Å–∫–æ–º –º–µ—Å—Ç
    places_text = ""
    for i, place in enumerate(places, 1):
        places_text += _(
            "{i}. {title}\n"
            "   üìç {address}\n"
            "   üïí {working_hours}\n\n"
        ).format(
            i=i,
            title=place["title"],
            address=place["address"],
            working_hours=place["working_hours"] or _("–ù–µ —É–∫–∞–∑–∞–Ω–æ")
        )
    
    text = _("{category_name}\n\n{places}").format(
        category_name=category_name,
        places=places_text
    )
    
    await callback.message.edit_text(
        text,
        reply_markup=get_places_list_keyboard(places)
    )
    await callback.answer()

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–µ—Ç–∞–ª–µ–π –º–µ—Å—Ç–∞
@router.callback_query(HalalCallback.filter(F.action == HalalAction.PLACE_DETAILS))
async def place_details_handler(
    callback: types.CallbackQuery,
    callback_data: HalalCallback,
    session: AsyncSession
) -> None:
    """
    –ü–æ–∫–∞–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ—Å—Ç–µ.
    """
    place_id = callback_data.place_id
    
    # –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏ –º–µ—Å—Ç–∞
    place = await HalalService.get_place_details(place_id, session)
    
    if not place:
        await callback.answer(_("–ú–µ—Å—Ç–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ."), show_alert=True)
        return
    
    # –ú–∞–ø–ø–∏–Ω–≥ —Ç–∏–ø–æ–≤ –º–µ—Å—Ç –Ω–∞ —ç–º–æ–¥–∑–∏
    place_type_emoji = {
        "mosque": "üïå",
        "restaurant": "üç¥",
        "shop": "üõí",
        "clothes": "üëï",
        "other": "üìç"
    }.get(place["place_type"], "üìç")
    
    # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç
    text = _(
        "{emoji} {title}\n\n"
        "üìç –ê–¥—Ä–µ—Å: {address}\n"
        "üïí –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: {working_hours}\n"
        "üìû –¢–µ–ª–µ—Ñ–æ–Ω: {phone}\n"
        "{verified}\n\n"
        "{description}"
    ).format(
        emoji=place_type_emoji,
        title=place["title"],
        address=place["address"],
        working_hours=place["working_hours"] or _("–ù–µ —É–∫–∞–∑–∞–Ω–æ"),
        phone=place["phone"] or _("–ù–µ —É–∫–∞–∑–∞–Ω"),
        verified=_("‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ") if place["is_verified"] else "",
        description=place["description"] or _("–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.")
    )
    
    await callback.message.edit_text(
        text,
        reply_markup=get_place_details_keyboard(place_id, is_favorite=False)
    )
    await callback.answer()

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–∫–∞–∑–∞ –Ω–∞ –∫–∞—Ä—Ç–µ
@router.callback_query(HalalCallback.filter(F.action == HalalAction.MAP))
async def show_on_map_handler(
    callback: types.CallbackQuery,
    callback_data: HalalCallback,
    session: AsyncSession
) -> None:
    """
    –ü–æ–∫–∞–∑ –º–µ—Å—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ.
    """
    place_id = callback_data.place_id
    
    if place_id == 0:
        # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ (–∑–∞–≥–ª—É—à–∫–∞)
        await callback.answer(
            _("–§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –≤—Å–µ—Ö –º–µ—Å—Ç –Ω–∞ –∫–∞—Ä—Ç–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ."),
            show_alert=True
        )
        return
    
    # –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏ –º–µ—Å—Ç–∞
    place = await HalalService.get_place_details(place_id, session)
    
    if not place:
        await callback.answer(_("–ú–µ—Å—Ç–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ."), show_alert=True)
        return
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
    await callback.message.answer_venue(
        latitude=place["latitude"],
        longitude=place["longitude"],
        title=place["title"],
        address=place["address"]
    )
    
    await callback.answer()

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
@router.callback_query(HalalCallback.filter(F.action == HalalAction.BACK))
async def back_handler(
    callback: types.CallbackQuery,
    callback_data: HalalCallback,
    session: AsyncSession
) -> None:
    """
    –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥".
    """
    from_state = callback_data.from_state
    
    if from_state == "main":
        # –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        counts = await HalalService.get_counts_by_category(session)
        
        text = _(
            "ü•© –•–ê–õ–Ø–õ–¨ –ú–ï–°–¢–ê\n\n"
            "–ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏:\n"
            "‚Ä¢ –ú–µ—á–µ—Ç–∏ –¥–ª—è –º–æ–ª–∏—Ç–≤—ã\n"
            "‚Ä¢ –†–µ—Å—Ç–æ—Ä–∞–Ω—ã —Å —Ö–∞–ª—è–ª—å –µ–¥–æ–π\n"
            "‚Ä¢ –ú–∞–≥–∞–∑–∏–Ω—ã —Å —Ö–∞–ª—è–ª—å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏\n"
            "‚Ä¢ –ú–∞–≥–∞–∑–∏–Ω—ã –æ–¥–µ–∂–¥—ã\n\n"
            "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n"
            "üïå –ú–µ—á–µ—Ç–∏: {mosques_count}\n"
            "üç¥ –†–µ—Å—Ç–æ—Ä–∞–Ω—ã: {restaurants_count}\n"
            "üõí –ú–∞–≥–∞–∑–∏–Ω—ã: {shops_count}\n\n"
            "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:"
        ).format(
            mosques_count=counts.get("mosque", 0),
            restaurants_count=counts.get("restaurant", 0),
            shops_count=counts.get("shop", 0) + counts.get("clothes", 0)
        )
        
        await callback.message.edit_text(
            text,
            reply_markup=get_halal_main_keyboard(counts)
        )
    
    elif from_state == "categories":
        # –í–æ–∑–≤—Ä–∞—Ç –∫ –≤—ã–±–æ—Ä—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        await callback.message.edit_text(
            _("üîç –ü–û–ò–°–ö –ü–û –ö–ê–¢–ï–ì–û–†–ò–Ø–ú\n\n–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:"),
            reply_markup=get_categories_keyboard()
        )
    
    elif from_state in ["list", "details"]:
        # –í–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        await callback.message.edit_text(
            _("üîç –ü–û–ò–°–ö –ü–û –ö–ê–¢–ï–ì–û–†–ò–Ø–ú\n\n–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:"),
            reply_markup=get_categories_keyboard()
        )
    
    await callback.answer()
```

## 8. Implementation Steps (–ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)

### –®–∞–≥ 1: –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
1. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ–ª—å HalalPlace –≤ `database/models.py`**
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –º–æ–¥–µ–ª–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 1.1
   - –î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç enum –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–æ–ª–µ–π
2. **–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ Alembic**
   ```bash
   alembic revision -m "add_halal_places_table"
   ```
3. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏**, –¥–æ–±–∞–≤–∏–≤ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `halal_places`
4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é**:
   ```bash
   alembic upgrade head
   ```
5. **–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è seeding —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö** (`scripts/seed_halal.py`):
   - 5-10 —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–µ—Å—Ç (–º–µ—á–µ—Ç–∏, —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã, –º–∞–≥–∞–∑–∏–Ω—ã)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥–æ—Ä–æ–¥–æ–≤ (–¢–∞—à–∫–µ–Ω—Ç, –ú–æ—Å–∫–≤–∞ –∏ —Ç.–¥.)

### –®–∞–≥ 2: –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π
1. **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `bot/services/halal_service.py`**
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 4
   - –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `haversine_distance`
   - –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç–æ–≤
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞** —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ

### –®–∞–≥ 3: Callback Data –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
1. **–°–æ–∑–¥–∞—Ç—å `bot/callbacks/halal.py`** —Å CallbackData –∫–ª–∞—Å—Å–∞–º–∏
2. **–°–æ–∑–¥–∞—Ç—å `bot/states/halal.py`** —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ FSM
3. **–û–±–Ω–æ–≤–∏—Ç—å `bot/callbacks/__init__.py`** –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞

### –®–∞–≥ 4: –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
1. **–°–æ–∑–¥–∞—Ç—å `bot/keyboards/inline/halal.py`**
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 6
   - –î–æ–±–∞–≤–∏—Ç—å —Ä—É—Å—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã –∏ —ç–º–æ–¥–∑–∏
2. **–û–±–Ω–æ–≤–∏—Ç—å `bot/keyboards/__init__.py`** –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞

### –®–∞–≥ 5: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
1. **–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `bot/handlers/sections/halal_places_handlers.py`**
   - –£–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞–≥–ª—É—à–∫—É
   - –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 7
   - –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–∞—Ö
2. **–û–±–Ω–æ–≤–∏—Ç—å `bot/handlers/__init__.py`** –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–æ—É—Ç–µ—Ä–∞

### –®–∞–≥ 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** —á–µ—Ä–µ–∑ seeding —Å–∫—Ä–∏–ø—Ç
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**:
   - –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
   - –ó–∞–ø—Ä–æ—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ ‚Üí —Å–ø–∏—Å–æ–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –º–µ—Å—Ç
   - –ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º ‚Üí —Å–ø–∏—Å–æ–∫ –º–µ—Å—Ç ‚Üí –¥–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
   - –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ"
   - –ù–∞–≤–∏–≥–∞—Ü–∏—è "–ù–∞–∑–∞–¥"
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥–∏ –∏ —É–ª—É—á—à–∏—Ç—å UX**

## 9. –£–≥–ª–æ–≤—ã–µ —Å–ª—É—á–∞–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 9.1 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Å—Ç –≤ —Ä–∞–¥–∏—É—Å–µ –ø–æ–∏—Å–∫–∞
- –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤ —Ä–∞–¥–∏—É—Å–µ X –∫–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ —Ö–∞–ª—è–ª—å –º–µ—Å—Ç"
- –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

### 9.2 –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–µ–ª–∏—Ç—å—Å—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π
- –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

### 9.3 –ü—É—Å—Ç—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: "–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç –º–µ—Å—Ç"
- –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### 9.4 –û—à–∏–±–∫–∏ –≤ callback –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è `callback_data` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö `place_id`

### 9.5 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫ –≤ inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ (100)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –¥–ª–∏–Ω—É —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (4096 —Å–∏–º–≤–æ–ª–æ–≤)
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (HTML/Markdown)

## 10. –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (post-MVP)

### 10.1 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –º–µ—Å—Ç
- **–û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—Ü–µ–Ω–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –º–µ—Å—Ç**: –ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—Ç–∞
- **–§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞**: –ü–æ —Ü–µ–Ω–µ, —Ä–µ–π—Ç–∏–Ω–≥—É, –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã
- **–ú–∞—Ä—à—Ä—É—Ç—ã**: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –¥–æ –º–µ—Å—Ç–∞

### 10.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **Google Maps API**: –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –∫–∞—Ä—Ç—ã –∏ –º–∞—Ä—à—Ä—É—Ç—ã
- **Places API**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ—Å—Ç–∞—Ö
- **Yandex Maps**: –î–ª—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏

### 10.3 –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- **CRUD –¥–ª—è –º–µ—Å—Ç**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ
- **–ú–æ–¥–µ—Ä–∞—Ü–∏—è**: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏–π
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥—É–ª—è

## 11. –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ MVP

### 11.1 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [ ] –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- [ ] –ó–∞–ø—Ä–æ—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –º–µ—Å—Ç
- [ ] –ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–º–µ—á–µ—Ç–∏, —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã, –º–∞–≥–∞–∑–∏–Ω—ã, –æ–¥–µ–∂–¥–∞)
- [ ] –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –º–µ—Å—Ç–∞ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- [ ] –ü–æ–∫–∞–∑ –º–µ—Å—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ —á–µ—Ä–µ–∑ Telegram Venue
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è "–ù–∞–∑–∞–¥" –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏

### 11.2 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –ë—ã—Å—Ç—Ä—ã–π —Ä–∞—Å—á–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π (–≥–∞–≤–µ—Ä—Å–∏–Ω—É—Å)
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Å–ø–∏—Å–∫–æ–≤

### 11.3 –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Å—Ç/–∫–∞—Ç–µ–≥–æ—Ä–∏–π

### 11.4 UX/UI
- [ ] –ü–æ–Ω—è—Ç–Ω—ã–µ —Ä—É—Å—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã —Å —ç–º–æ–¥–∑–∏
- [ ] –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- [ ] –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∏–∑–∞–π–Ω—É –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π –±–æ—Ç–∞

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è "Halal Places" –¥–ª—è Islamic Telegram Bot. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç:

1. **–ú–æ–¥–µ–ª—å –ë–î** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
2. **–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π** —Å –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
3. **–ü–æ–ª–Ω—ã–π user flow** –æ—Ç –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –¥–æ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –∫–∞—Ä—Ç–∞–º–∏** —á–µ—Ä–µ–∑ Telegram Venue
5. **–ù–∞–≤–∏–≥–∞—Ü–∏—é** –º–µ–∂–¥—É –≤—Å–µ–º–∏ —ç–∫—Ä–∞–Ω–∞–º–∏ –º–æ–¥—É–ª—è

–ú–æ–¥—É–ª—å —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω —Å —É—á–µ—Ç–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω –≤ –±—É–¥—É—â–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –æ—Ç–∑—ã–≤–æ–≤, —Ä–µ–π—Ç–∏–Ω–≥–æ–≤, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

---
*–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω: 15.12.2025*  
*–í–µ—Ä—Å–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏: 1.0*  
*–°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏*  
*–°–ª–æ–∂–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è (4-5 –¥–Ω–µ–π –¥–ª—è –æ–ø—ã—Ç–Ω–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)*  
*–ê–≤—Ç–æ—Ä: Senior Python Developer / Aiogram Specialist*
